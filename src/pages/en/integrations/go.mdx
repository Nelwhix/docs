---
title: Treblle for Go
description: Integrating Treblle in Go
layout: ../../../layouts/MainLayout.astro
---

import TreblleIntegrations from '../../../components/TreblleIntegrations.astro'
import CopyBody from '../../../components/CopyBody.tsx'

## Introduction

Treblle middleware for Go works with applications based on `net/http`.

## Installation

Trebble uses [Go Modules](https://github.com/golang/go/wiki/Modules) to manage dependencies.

<CopyBody client:load>
  ```shell go get github.com/treblle/treblle-go ```
</CopyBody>

## Basic configuration

Configure Treblle at the start of your `main()` function:

<CopyBody client:load>
```go
import "github.com/treblle/treblle-go"

func main() {
treblle.Configure(treblle.Configuration{
APIKey: "YOUR API KEY HERE",
ProjectID: "YOUR PROJECT ID HERE",
AdditionalFieldsToMask: []string{"password", "card_number"}, // optional, specify additional fields to mask
}

    // rest of your program.

}

````
</CopyBody>

After that, just use the middleware with any of your handlers:

<CopyBody client:load>
```go
mux := http.NewServeMux()
mux.Handle("/", treblle.Middleware(http.HandlerFunc(yourHandler)))
````

</CopyBody>

## gorilla/mux

To setup the `treblle.Middleware` in `gorilla/mux`, you can use it as a global middleware:

<CopyBody client:load>
  ```go r := mux.NewRouter() r.Use(treblle.Middleware) ```
</CopyBody>

### per-route

You can also use `treblle.Middleware` as a per-route middleware just like you will use it with `net/http`:

<CopyBody client:load>
  ```go r := mux.NewRouter() r.Handle("/",
  treblle.Middleware(http.HandlerFunc(yourHandler))) ```
</CopyBody>

### Subroutes

You can also use `treblle.Middleware` on `gorilla/mux` subroutes:

<CopyBody client:load>
```go
r := mux.NewRouter()

apiRouter := r.PathPrefix("/api").Subrouter()

apiRouter.Use(treblle.Middleware) // Set as a middleware for this subroute

apiRouter.HandleFunc("/users", yourHandler)

```
</CopyBody>

## More Integrations

<TreblleIntegrations />
```
